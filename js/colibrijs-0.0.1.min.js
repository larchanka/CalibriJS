var global=function(){return this||(1,eval)("this")}();global.hasOwnProperty("console")||(global.console={log:function(){return!1},dir:function(){return!1}});var Colibrijs=function(a){return{settings:{routers:a.routers||{},cache:void 0!==a.cache?a.cache:!0,rewriteObject:void 0!==a.rewriteObject?a.rewriteObject:!0,historyAPI:"auto"==a.historyAPI?"undefined"!=typeof history.pushState?!0:!1:a.historyAPI},templatesCache:{},requestsCache:{},init:function(){if(global.CJS=this,_event=this.settings.historyAPI?"popstate":"hashchange",global.CJSOBJ=document.querySelector('[data-app="true"]')||document.body,"extends"in a)for(var b in a.extends)this[b]=a.extends[b];this.settings.historyAPI?([].forEach.call(document.querySelectorAll("a"),function(a){a.removeEventListener("click",CJS.bindHistory,!1),a.addEventListener("click",CJS.bindHistory,!1)}),this.hashChangeEvent(document.location.pathname.replace(/^\//,""))):(this.fixLinks(),this.hashChangeEvent(document.location.hash?document.location.hash.replace("#/",""):null)),window.addEventListener(_event,function(){return CJS.hashChangeEvent(CJS.settings.historyAPI?document.location.pathname.replace(/^\//,""):document.location.hash.replace("#/",""))},!1)},hashChangeEvent:function(a){var b=a?a.split("/"):[];return b[1]&&b[1].match(/^\d{0,}$/g)&&(b[1]=parseInt(b[1])),this[this.findRouter(b[0])](b[1]?b[1]:null),!1},findRouter:function(a){var b=[];for(var c in this.settings.routers)if(b=c.split("/"),b[0]==a)return this.settings.routers[c];return this.settings.routers[""]},drawAppLoader:function(){this.settings.rewriteObject&&(global.CJSOBJ.innerHTML="Loading...")},sortByKey:function(a,b,c){return c=c||"asc",a.sort(function(a,d){var e=a[b],f=d[b];return"string"==typeof e&&(e=e.toLowerCase(),f=f.toLowerCase()),"desc"==c?f>e?1:e>f?-1:0:f>e?-1:e>f?1:0})},template:function b(a,c){var d=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):this.templatesCache[a]=this.templatesCache[a]||b(document.getElementById(a).innerHTML);global.CJSOBJ.innerHTML=c?d(c):d,this.settings.historyAPI?[].forEach.call(document.querySelectorAll("a"),function(a){a.removeEventListener("click",CJS.bindHistory,!1),a.addEventListener("click",CJS.bindHistory,!1)}):this.fixLinks()},getTemplate:function(a){return document.getElementById(a).innerHTML},bindHistory:function(a){history.pushState(null,null,this.getAttribute("href")),CJS.hashChangeEvent(document.location.pathname.replace(/^\//,"")),a.preventDefault()},fixLinks:function(){[].forEach.call(document.querySelectorAll("a"),function(a){var b=a.getAttribute("href");0==b.indexOf("/")&&a.setAttribute("href","#"+b)})},request:function(a,b,c,d,e){if("function"==typeof c&&(e=d,d=c,c=null),this.settings.cache&&this.requestsCache[b])return d(JSON.parse(this.requestsCache[b])),void 0;var f,g="XDomainRequest"in global?new XDomainRequest:new XMLHttpRequest;if(g.open(a,b),"POST"===a&&c){f=new FormData;for(var h in c)f.append(h,JSON.stringify(c[h]))}g.onload=function(){CJS.settings.cache&&(CJS.requestsCache[b]=g.response),d(JSON.parse(g.responseText))},g.onerror=function(){e(g.response)},g.send(c?f:null)}}};